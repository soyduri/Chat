<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>DarksApp</title>
    <link rel="stylesheet" href="../css/bootstrap.css" />
    <link rel="stylesheet" href="../css/chat.css" />
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let contenido_enviar = {};
        //Realizamos la conexión cada vez que se carga esta página.
        var conn = new WebSocket("ws://localhost:8080");
        conn.onopen = function (e) {
          console.log("¡Conexión establecida! ");
        };
        conn.onmessage = function (e) {
          let respuesta = JSON.parse(e.data);
          console.log("nombre: " + respuesta.nombre + "Mensaje: " + respuesta.mensaje);
        };

        let btn_enviar = document.getElementById("btn_enviar_mensaje");
        btn_enviar.addEventListener("click", function () {
          var nombre_amigo = document.getElementById("nombre_amigo").textContent;
          var mensaje = document.getElementById("type-area").value;

          var enviar = { nombre: nombre_amigo, mensaje: mensaje };
          conn.send(JSON.stringify(enviar));
        });
      });
    </script>
  </head>

  <body>
    <div id="app" class="app">
      <!-- LEFT SECTION -->

      <section id="main-left" class="main-left">
        <!-- header -->
        <div id="header-left" class="header-left">
          <!-- <span class="glyphicon glyphicon-menu-hamburger hamburger-btn"></span> -->
          <div class="input-wrapper">
            <button class="icon">
              <svg width="25px" height="25px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M11.5 21C16.7467 21 21 16.7467 21 11.5C21 6.25329 16.7467 2 11.5 2C6.25329 2 2 6.25329 2 11.5C2 16.7467 6.25329 21 11.5 21Z"
                  stroke="#fff"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                ></path>
                <path d="M22 22L20 20" stroke="#fff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
              </svg>
            </button>
            <input type="text" name="text" class="input" placeholder="search.." />
          </div>
          <!-- self-profile -->
          <div id="self-info" class="self-info">
            <!-- photo -->
            <div class="profile your-photo">
              <img src="../images/ava4.jpg" alt="" />
            </div>
            <!-- name -->
            <h4 class="name your-name">Los Danis</h4>

            <!-- setting btn -->
            <span class="glyphicon glyphicon-cog"></span>
            <!--btn logout -->
            <button class="btn-logout">
              <div class="sign">
                <svg viewBox="0 0 512 512">
                  <path
                    d="M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"
                  ></path>
                </svg>
              </div>
              <div class="text">Logout</div>
            </button>
          </div>
        </div>

        <!-- chat list -->
        <div id="chat-list" class="chat-list">
          <!-- user lists -->
          <div id="friends" class="friends">
            <!-- photo -->
            <div class="profile friends-photo">
              <img src="../images/ava2.jpg" alt="" />
            </div>

            <div class="friends-credent">
              <!-- name -->
              <span class="friends-name">Mario Gomez</span>
              <!-- last message -->
              <span class="friends-message">Crap! I forgot my shoes. Can you bring extra pair for me?</span>
            </div>
            <!-- notification badge -->
            <span class="badge notif-badge">7</span>
          </div>

          <div id="friends" class="friends">
            <!-- photo -->
            <div class="profile friends-photo">
              <img src="../images/ava3.jpg" alt="" />
            </div>

            <div class="friends-credent">
              <!-- name -->
              <span class="friends-name">Andre Silva</span>
              <!-- last message -->
              <span class="friends-message">How are you?</span>
            </div>
            <!-- notification badge -->
            <span class="badge notif-badge">999</span>
          </div>

          <div id="friends" class="friends">
            <!-- photo -->
            <div class="profile friends-photo">
              <img src="../images/ava5.jpg" alt="" />
            </div>

            <div class="friends-credent">
              <!-- name -->
              <span class="friends-name">Marco Reus</span>
              <!-- last message -->
              <span class="friends-message">Sehr gud, Danke!</span>
            </div>
            <!-- notification badge -->
            <span class="badge notif-badge">26</span>
          </div>
          <div id="friends" class="friends">
            <!-- photo -->
            <div class="profile friends-photo">
              <img src="../images/ava5.jpg" alt="" />
            </div>

            <div class="friends-credent">
              <!-- name -->
              <span class="friends-name">Marco Reus</span>
              <!-- last message -->
              <span class="friends-message">Sehr gud, Danke!</span>
            </div>
            <!-- notification badge -->
            <span class="badge notif-badge">26</span>
          </div>

          <div id="friends" class="friends">
            <!-- photo -->
            <div class="profile friends-photo">
              <img src="../images/ava6.jpg" alt="" />
            </div>

            <div class="friends-credent">
              <!-- name -->
              <span class="friends-name">Antoine Griezmann</span>
              <!-- last message -->
              <span class="friends-message">Let's 1v1 with me on FIFA20! Winner takes it all!</span>
            </div>
            <!-- notification badge -->
            <span class="badge notif-badge">7</span>
          </div>

          <div id="friends" class="friends">
            <!-- photo -->
            <div class="profile friends-photo">
              <img src="../images/ava6.jpg" alt="" />
            </div>

            <div class="friends-credent">
              <!-- name -->
              <span class="friends-name">Antoine Griezmann</span>
              <!-- last message -->
              <span class="friends-message">Let's 1v1 with me on FIFA20! Winner takes it all!</span>
            </div>
            <!-- notification badge -->
            <span class="badge notif-badge">7</span>
          </div>

          <div id="friends" class="friends">
            <!-- photo -->
            <div class="profile friends-photo">
              <img src="../images/ava7.jpg" alt="" />
            </div>

            <div class="friends-credent">
              <!-- name -->
              <span class="friends-name">Manuel Neuer</span>
              <!-- last message -->
              <span class="friends-message">Congrats on winning Serie A for the 99th time!</span>
            </div>
            <!-- notification badge -->
            <span class="badge notif-badge">7</span>
          </div>
          <div id="friends" class="friends">
            <!-- photo -->
            <div class="profile friends-photo">
              <img src="../images/ava7.jpg" alt="" />
            </div>

            <div class="friends-credent">
              <!-- name -->
              <span class="friends-name">Manuel Neuer</span>
              <!-- last message -->
              <span class="friends-message">Congrats on winning Serie A for the 99th time!</span>
            </div>
            <!-- notification badge -->
            <span class="badge notif-badge">7</span>
          </div>
          <div id="friends" class="friends">
            <!-- photo -->
            <div class="profile friends-photo">
              <img src="../images/ava7.jpg" alt="" />
            </div>

            <div class="friends-credent">
              <!-- name -->
              <span class="friends-name">Manuel Neuer</span>
              <!-- last message -->
              <span class="friends-message">Congrats on winning Serie A for the 99th time!</span>
            </div>
            <!-- notification badge -->
            <span class="badge notif-badge">7</span>
          </div>
          <div id="friends" class="friends">
            <!-- photo -->
            <div class="profile friends-photo">
              <img src="../images/ava7.jpg" alt="" />
            </div>

            <div class="friends-credent">
              <!-- name -->
              <span class="friends-name">Manuel Neuer</span>
              <!-- last message -->
              <span class="friends-message">Congrats on winning Serie A for the 99th time!</span>
            </div>
            <!-- notification badge -->
            <span class="badge notif-badge">7</span>
          </div>
          <div id="friends" class="friends">
            <!-- photo -->
            <div class="profile friends-photo">
              <img src="../images/ava7.jpg" alt="" />
            </div>

            <div class="friends-credent">
              <!-- name -->
              <span class="friends-name">Manuel Neuer</span>
              <!-- last message -->
              <span class="friends-message">Congrats on winning Serie A for the 99th time!</span>
            </div>
            <!-- notification badge -->
            <span class="badge notif-badge">7</span>
          </div>

          <div id="friends" class="friends">
            <!-- photo -->
            <div class="profile friends-photo">
              <img src="../images/ava1.jpg" alt="" />
            </div>

            <div class="friends-credent">
              <!-- name -->
              <span class="friends-name">Mattia de Sciglio</span>
              <!-- last message -->
              <span class="friends-message">Hi, are you ready for the match?</span>
            </div>
            <!-- notification badge -->
            <span class="badge notif-badge">7</span>
          </div>
        </div>
      </section>

      <!-- RIGHT SECTION -->

      <section id="main-right" class="main-right">
        <!-- header -->
        <div id="header-right" class="header-right">
          <!-- profile pict -->
          <div id="header-img" class="profile header-img">
            <img src="../images/ava2.jpg" alt="" />
          </div>

          <!-- name -->
          <h4 class="name friend-name" id="nombre_amigo">Mario Gomez</h4>

          <!-- some btn -->
          <div class="some-btn">
            <span class="glyphicon glyphicon-facetime-video"></span>
            <span class="glyphicon glyphicon-earphone"></span>
            <span class="glyphicon glyphicon-option-vertical option-btn" id="option-btn">
              <div class="dropdown text-end">
                <ul class="dropdown-menu custom-dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton">
                  <li><a class="dropdown-item custom-dropdown-item" href="#">Bloquear usuario</a></li>
                  <li><a class="dropdown-item custom-dropdown-item" href="#">Vaciar chat</a></li>
                </ul>
              </div>
            </span>
          </div>
        </div>

        <!-- chat area -->
        <div id="chat-area" class="chat-area">
          <!-- chat content -->

          <!-- FRIENDS CHAT TEMPLATE -->
          <div id="friends-chat" class="friends-chat">
            <div class="profile friends-chat-photo">
              <img src="../images/ava2.jpg" alt="" />
            </div>
            <div class="friends-chat-content">
              <p class="friends-chat-name">Mario Gomez</p>
              <p class="friends-chat-balloon">Yo Dybala!</p>
              <h5 class="chat-datetime">Sun, Aug 30 | 15:41</h5>
            </div>
          </div>

          <!-- YOUR CHAT TEMPLATE -->
          <div id="your-chat" class="your-chat">
            <p class="your-chat-balloon">'sup</p>
            <p class="chat-datetime"><span class="glyphicon glyphicon-ok"></span> Sun, Aug 30 | 15:45</p>
          </div>

          <!-- FRIENDS CHAT TEMPLATE -->
          <div id="friends-chat" class="friends-chat">
            <div class="profile friends-chat-photo">
              <img src="../images/ava2.jpg" alt="" />
            </div>
            <div class="friends-chat-content">
              <p class="friends-chat-name">Mario Gomez</p>
              <p class="friends-chat-balloon">
                Lorem ipsum dolor, sit amet consectetur adipisicing elit. Itaque vero iusto perferendis nemo ad ipsam mollitia ducimus? Et possimus numquam minus impedit tempora, nulla, enim in magni
                accusamus dolore fugiat nisi culpa exercitationem fuga consequatur eos aliquam perspiciatis. Minima praesentium expedita facere quod labore magnam eveniet commodi veniam porro placeat?
              </p>
              <h5 class="chat-datetime">Sun, Aug 30 | 15:41</h5>
            </div>
          </div>

          <!-- FRIENDS CHAT TEMPLATE -->
          <div id="friends-chat" class="friends-chat">
            <div class="profile friends-chat-photo">
              <img src="../images/ava2.jpg" alt="" />
            </div>
            <div class="friends-chat-content">
              <p class="friends-chat-name">Mario Gomez</p>
              <p class="friends-chat-balloon">Lorem ipsum dolor sit amet consectetur adipisicing elit. Praesentium, consequatur!</p>
              <h5 class="chat-datetime">Sun, Aug 30 | 15:41</h5>
            </div>
          </div>

          <!-- YOUR CHAT TEMPLATE -->
          <div id="your-chat" class="your-chat">
            <p class="your-chat-balloon">
              Lorem ipsum, dolor sit amet consectetur adipisicing elit. Beatae amet modi aliquid molestiae. Adipisci, similique dolor expedita error explicabo at cupiditate exercitationem dolorem
              corrupti. Pariatur.
            </p>
            <p class="chat-datetime"><span class="glyphicon glyphicon-ok"></span> Sun, Aug 30 | 15:45</p>
          </div>

          <!-- FRIENDS CHAT TEMPLATE -->
          <div id="friends-chat" class="friends-chat">
            <div class="profile friends-chat-photo">
              <img src="../images/ava2.jpg" alt="" />
            </div>
            <div class="friends-chat-content">
              <p class="friends-chat-name">Mario Gomez</p>
              <p class="friends-chat-balloon">Crap! I forgot my shoes. Can you bring extra pair for me?</p>
              <h5 class="chat-datetime">Sun, Aug 30 | 15:41</h5>
            </div>
          </div>

          <!-- YOUR CHAT TEMPLATE -->
          <div id="your-chat" class="your-chat">
            <p class="your-chat-balloon">sure m8</p>
            <p class="chat-datetime"><span class="glyphicon glyphicon-ok"></span> Sun, Aug 30 | 15:45</p>
          </div>

          <!-- FRIENDS CHAT TEMPLATE -->
          <div id="friends-chat" class="friends-chat">
            <div class="profile friends-chat-photo">
              <img src="../images/ava2.jpg" alt="" />
            </div>
            <div class="friends-chat-content">
              <p class="friends-chat-name">Mario Gomez</p>
              <p class="friends-chat-balloon">Thanks!</p>
              <h5 class="chat-datetime">Sun, Aug 30 | 15:41</h5>
            </div>
          </div>
        </div>

        <!-- typing area -->
        <div id="typing-area" class="typing-area">
          <!-- input form -->
          <input id="type-area" class="type-area" placeholder="Type something..." type="text" />
          <!-- attachment btn -->
          <div class="attach-btn">
            <!-- Vista previa de la cámara en escritorio -->
            <video id="videoPreview" width="320" height="240" autoplay style="display: none; margin-top: 10px"></video>
            <span class="glyphicon glyphicon-paperclip file-btn icon-hover-scale" id="spanFile">
              <input type="file" style="display: none" id="inputFile" />
            </span>
            <span class="glyphicon glyphicon-camera icon-hover-scale" id="spanCam">
              <input type="file" accept="image/*" capture="environment" style="display: none" id="inputCam" />
            </span>
            <span class="glyphicon glyphicon-picture icon-hover-scale" id="spanImg">
              <input type="file" style="display: none" id="inputImg" />
            </span>
          </div>
          <!-- send btn -->
          <button class="btn-enviar">
            <div class="svg-wrapper-1">
              <div class="svg-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
                  <path fill="none" d="M0 0h24v24H0z"></path>
                  <path
                    fill="currentColor"
                    d="M1.946 9.315c-.522-.174-.527-.455.01-.634l19.087-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.455.547-.679.045L12 14l6-8-8 6-8.054-2.685z"
                  ></path>
                </svg>
              </div>
            </div>
            <span>Send</span>
          </button>
        </div>
      </section>
    </div>

    <!-- jQuey, Popper, BootstrapJS -->
    <script src="../javascript/jquery-3.3.1.min.js"></script>
    <script src="../javascript/bootstrap.min.js"></script>
    <script src="../javascript/bootstrap.min.js"></script>
    <script src="../javascript/botonesEnviar.js"></script>
    <script>
      const optionBtn = document.querySelector("#option-btn");
      const dropdownMenu = optionBtn.querySelector("ul");

      optionBtn.addEventListener("click", function (e) {
        e.stopPropagation(); // evita que el clic se propague al documento
        dropdownMenu.style.display = "block";
      });

      document.addEventListener("click", function (e) {
        // Si el clic NO es dentro del botón o el menú, ocultamos el menú
        if (!optionBtn.contains(e.target)) {
          dropdownMenu.style.display = "none";
        }
      });
    </script>
  </body>
</html>
